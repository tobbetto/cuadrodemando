define(["jquery","core/ajax","core/notification"],function(a,b,c){"use strict";var d={init:function(){this.bindEvents(),this.loadCharts(),this.refreshData()},bindEvents:function(){a(".dashboard-nav a").on("click",function(b){b.preventDefault();var c=a(this).attr("href");d.loadPage(c)}),a("#refresh-dashboard").on("click",function(){d.refreshData()})},loadCharts:function(){"undefined"!=typeof Chart&&(this.initUserActivityChart(),this.initCourseChart())},initUserActivityChart:function(){var a=document.getElementById("userActivityChart");a&&new Chart(a,{type:"line",data:{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"User Logins",data:[12,19,3,5,2,3,7],borderColor:"rgb(75, 192, 192)",tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1}})},initCourseChart:function(){var a=document.getElementById("courseChart");a&&new Chart(a,{type:"doughnut",data:{labels:["Active","Completed","Pending"],datasets:[{data:[300,50,100],backgroundColor:["#28a745","#17a2b8","#ffc107"]}]},options:{responsive:!0,maintainAspectRatio:!1}})},refreshData:function(){var a=b.call([{methodname:"local_dashboard_get_stats",args:{}}]);a[0].done(function(a){d.updateStats(a)}).fail(function(a){c.exception(a)})},updateStats:function(b){b.total_users&&a(".stat-users").text(b.total_users),b.total_courses&&a(".stat-courses").text(b.total_courses),b.total_enrollments&&a(".stat-enrollments").text(b.total_enrollments)},loadPage:function(a){window.location.href=a}};return d});
